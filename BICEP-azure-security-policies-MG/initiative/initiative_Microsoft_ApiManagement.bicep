targetScope = 'managementGroup'

var variables = json(loadTextContent('../main/variables.json'))

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////// CALLING EXISTING POLICIES ////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////

resource id2caf6f37_0cb0_491c_bb7f_783cf7700965 'Microsoft.Authorization/policydefinitions@2020-09-01' existing = {
  name: 'id2caf6f37-0cb0-491c-bb7f-783cf7700965'
	scope: managementGroup(variables.scope)
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////// Variables for Initiatives ////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////



///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////// Initiatives ///////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////

resource initiative_Microsoft_ApiManagement 'Microsoft.Authorization/policySetDefinitions@2020-09-01' = {
	name: 'initiative_Microsoft_ApiManagement'
	properties: {
		displayName: 'Avanade: Microsoft_ApiManagement'
		description: 'Grouping of policies that belong to the resource provider Microsoft_ApiManagement'
		policyType: 'Custom'
		metadata: {
			category: 'Avanade: ApiManagement'
		}
		policyDefinitions: [
			{
				policyDefinitionId: id2caf6f37_0cb0_491c_bb7f_783cf7700965.id
			}
			{
				policyDefinitionId: '/providers/Microsoft.Authorization/policyDefinitions/ef619a2c-cc4d-4d03-b2ba-8c94a834d85b'
			}
			{
				policyDefinitionId: '/providers/Microsoft.Authorization/policyDefinitions/73ef9241-5d81-4cd4-b483-8443d1730fe5'
			}
		]
	}
}

